# 2018 Round F

-   Score : -
-   Rank : -

---

## A

- 任何形式的暴力都是可以的

## B

- 直观的想法是不管要不要计数，应该要能够求出最小代价

- 可惜的是这个也不会求，所以看了题解...

  -----------------------------------------------------------------

- 题解给出了一个牛逼的结论是 : 每个点都能找到离自己最近的一个点和其互补

  - 这样的情况下，代价最小性是显然的，那么为什么一定存在这样的方案呢
  - 我们直观上考虑任选一个点，标为黑色，选一个离它最近的点标为白色
  - 再选离那个白点最近的点标为黑色，如此往复
  - 我们发现如果要产生矛盾，那么必然是产生了环，且是奇环，且环边的所有距离不能全部相等
  - 事实上我们发现这样的环是不可能产生的
    距离单调不上升的情况下，如果不全等就违背了第一个点的距离最小性
  - 综上，我们发现**每个点都能找到离自己最近的一个点和其互补**是必然存在的可行方案
    这也是显然的最小代价

- 下面我们开始计数

  - 注意到所有边的$L$都不一样，漏了这个条件这题都不知道能不能做了qwq
  - 我们把所有边按$L$从小到大排序，简单数一数自由元数量即可
  - 注意特别判断一下存在$L = 0$的情况，此时如果一边村庄是最近的，另一边也是
  - 假设自由元数量为$N$，答案就是$2^N$

## C

- 首先我们看小数据，和正常的字符串计数一样，我们$O(NL)$枚举字符串的每一位
  
  - 考虑对某个前缀下的字符串进行计数，我们可以$O(N)$枚举最终串的位数，然后再$O(N)$判断当前前缀是否满足潜在的回文要求，总复杂度为$O(N^3L)$
  - 需要注意的是我尝试使用Hash将复杂度优化为$O(N^2L)$，但是单Hash似乎会重复，吃到了WA，所以作罢
  
- 接下来我们考虑大数据，精妙的部分来了！
  
  - 显然，如果$K \leq N$，那么答案就是长度为$K$的`aaaaaaaaaaaa`
  - 如果$L = 1$，也特判掉这种情况
  - 当$N$很大的时候，可以预见答案串的长度应该会在$N$附近，具体证明很容易思考
  - 考虑到一个性质，我们不妨只考虑最中间的$100$位**左右**(坑点1)，对于串A字典序小于串B，我们将两个串分别拼上相同的全`a`前后缀之后，字典序关系不变
  - 因此我们只需要求出长度小于等于某个$100$左右的阈值，字典序顺序第$K'$大(坑点2)的串长，再补上前后缀的长度即可
  
- P.S.

  - 坑点1，之所以说左右是因为我们需要保证$N - \text{考虑位数} $需要为偶数
  - 坑点2，不妨假设前后缀加起来的长度为$M$，那么我们事实上要求的应该是$K' = K - M$，因为我们预设了最终串长大于$M$，所以需要扣除掉长度小于等于$M$的全`a`串

  ​    
